<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title | default: site.title | default: "Mike Vincent" }}</title>
  <link rel="stylesheet" href="theme.css">
  <script>
    (function() {
      const saved = localStorage.getItem('theme');
      if (saved) document.documentElement.setAttribute('data-theme', saved);
    })();
  </script>
  <script defer src="https://cloud.umami.is/script.js" data-website-id="0b071a15-3183-4e68-a1d1-76c5d8d37b52"></script>
</head>
<body>
  <button class="theme-toggle" aria-label="Toggle theme" onclick="toggleTheme()">
    <span id="theme-icon"></span>
  </button>
  {{ content }}
  <script>
    function getIcon(theme) {
      const isDark = theme === 'dark' ||
        (theme === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches);
      return isDark ? '\u2600' : '\u263D';
    }
    function updateIcon() {
      const theme = document.documentElement.getAttribute('data-theme') || 'auto';
      document.getElementById('theme-icon').textContent = getIcon(theme);
    }
    function toggleTheme() {
      const current = document.documentElement.getAttribute('data-theme') || 'auto';
      const next = current === 'dark' ? 'light' : current === 'light' ? 'auto' : 'dark';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      updateIcon();
    }
    updateIcon();
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateIcon);
  </script>
</body>
</html>
